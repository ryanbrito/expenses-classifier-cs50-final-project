{% extends "layout.html" %}

{% block title %}
    Dashboard
{% endblock %}

{% block main %}
    <head id="titleHead">
        <p id="titleDash">
            <b><u>Dashboard: {{tableName}}</u></b>
        </p>
    </head>

    <!-- Graph of total expense per categorie:-->
    <img id="graph" src={{source}} alt="">

    <!-- Table where the user can manually edit the category of his/her expenses: -->
    <br>
    <div >
        <table class="table table-striped" style="margin: auto; width: 90%" id="tables">
            <thead style="background-color: #36bb7b;">
                <tr>
                    <th scope="col">ID:</th>
                    <th scope="col">Expense:</th>
                    <th scope="col">Cost:</th>
                    <th scope="col">Category:</th>
                </tr>
            </thead>
            <tbody>
                {% for row in table %}
                    <tr id="rows">   
                        <td>{{row['id']}}</td>
                        <td>{{row['expense']}}</td>
                        <td>{{row['value']}}</td>
                        <form>
                            <!-- Select Menu where the user can manually change the category of an especific expense-->
                            <td id="categoryDivison">

                                {% set menuId =  row['id']|string %}

                                <select name="change" id={{menuId}}>
                                    <option disabled selected>{{row['category']}}</option>
                                    {% for category in personalCategories%}
                                        {% if category != row['category'] %}
                                            <option value={{category}}>{{category}}</option>
                                        {% endif %}
                                    {% endfor%}
                                </select>
                                
                            </td>
                        </form>                        
                    </tr>
                {%  endfor %}
            </tbody>
        </table>

        <br>
        <button type="button" class="btn btn-success" onclick="submitCategoryChange()">Submit Changes</button>
        <br>

    </div>
{% endblock %}