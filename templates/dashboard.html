{% extends "layout.html" %}

{% block title %}
    Dashboard
{% endblock %}

{% block main %}
    <head id="titleHead">
        <p id="titleDash">
            <b><u>Dashboard: {{tableName}}</u></b>
        </p>
    </head>

    <!-- Graph of total expense per categorie:-->
    <img id="graph" src={{source}} alt="">

    <!-- Table where the user can manually edit the category of his/her expenses: -->
    <br>
    <div >
        <table class="table table-striped" style="margin: auto; width: 90%" id="tables">
            <thead style="background-color: #36bb7b;">
                <tr>
                    <th scope="col">ID:</th>
                    <th scope="col">Expense:</th>
                    <th scope="col">Cost:</th>
                    <th scope="col">Category:</th>
                </tr>
            </thead>
            <tbody>
                {% for row in table %}
                    <tr id="rows">   
                        <td>{{row['id']}}</td>
                        <td>{{row['expense']}}</td>
                        <td>{{row['value']}}</td>
                        <form action="/dashboardEdit" method="post">
                            <!-- Select Menu where the user can manually change the category of an especific expense-->
                            <td id="categoryDivison">
                                <select name="change" id="categorySelection" onchange="this.form.submit()">
                                    <option disabled selected>{{row['category']}}</option>
                                    {% for category in personalCategories%}
                                        {% if category != row['category'] %}
                                            <!-- Try to pass multiple values-->
                                            <option value={{row['id']}} >{{category}}</option>
                                        {% endif %}
                                    {% endfor%}
                                </select>
                            </td>
                        </form>
                        
                    </tr>
                {%  endfor %}
            </tbody>
        </table>
    </div>
    

    <form method="post" action="/delete-user">
        <br><input type="submit" name="delete" value="Delete Account">
    </form>
{% endblock %}